all:
  hosts:
    av-scanner:
      # Connection settings - automatically configured by scripts/vm-init.sh
      # Override with environment variables or command-line -e flags
      #
      # For Multipass VM:
      #   export AV_SCANNER_IP=$(multipass info av-scanner | grep IPv4 | awk '{print $2}')
      #   ansible-playbook -i inventory.yaml deploy.yaml
      #
      # For QEMU VM:
      #   export AV_SCANNER_IP=localhost
      #   export AV_SCANNER_PORT=2222
      #   export AV_SCANNER_KEY=../.ssh/id_ed25519
      #   ansible-playbook -i inventory.yaml deploy.yaml

      ansible_host: "{{ lookup('env', 'AV_SCANNER_IP') | default('192.168.64.2', true) }}"
      ansible_user: ubuntu
      ansible_port: "{{ lookup('env', 'AV_SCANNER_PORT') | default(22, true) }}"

      # SSH authentication - uses project key for QEMU, home key for Multipass
      ansible_ssh_private_key_file: "{{ lookup('env', 'AV_SCANNER_KEY') | default(lookup('env', 'HOME') + '/.ssh/id_rsa', true) }}"

      # SSH options for both hypervisors
      ansible_ssh_common_args: "-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null"

      # Python interpreter (Ubuntu 22.04+)
      ansible_python_interpreter: /usr/bin/python3
